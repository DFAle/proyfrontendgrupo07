<div class="container mt-4">
  <!-- Tarjeta principal -->
  <div class="card shadow-lg border-0">
    <div class="card-header bg-success text-white d-flex align-items-center">
      <i class="fas fa-users me-3 fs-3"></i>
      <h2 class="m-0">Formulario de Registro de Socios</h2>
    </div>
    <div class="card-body p-4">
      <form [formGroup]="socioForm">
        <div class="row">
          <!-- Columna izquierda -->
          <div class="col-md-6">
            <!-- Nombre con icono -->
            <div class="form-group mb-4">
              <label for="nombre" class="font-weight-bold d-flex align-items-center">
                <i class="fas fa-id-card me-2 text-success"></i> Nombre
              </label>
              <div class="input-group">
                <span class="input-group-text text-success"><i class="fas fa-user"></i></span>
                <input type="text" class="form-control input-verde" id="nombre" placeholder="Ingresa tu nombre"
                  formControlName="nombre">
              </div>
              <div *ngIf="socioForm.controls['nombre'].errors && 
                         (socioForm.controls['nombre'].dirty || socioForm.controls['nombre'].touched)" 
                   class="alert alert-danger mt-2 p-2">
                <div *ngIf="socioForm.controls['nombre'].errors['required']">
                  <small><i class="fas fa-exclamation-circle me-1"></i>El nombre es requerido.</small>
                </div>
                <div *ngIf="socioForm.controls['nombre'].errors['minlength']">
                  <small><i class="fas fa-exclamation-circle me-1"></i>El nombre debe tener al menos 3 caracteres.</small>
                </div>
              </div>
            </div>

            <!-- Apellido con icono -->
            <div class="form-group mb-4">
              <label for="apellido" class="font-weight-bold d-flex align-items-center">
                <i class="fas fa-id-card me-2 text-success"></i> Apellido
              </label>
              <div class="input-group">
                <span class="input-group-text text-success"><i class="fas fa-user"></i></span>
                <input type="text" class="form-control input-verde" id="apellido" placeholder="Ingresa tu apellido"
                  formControlName="apellido">
              </div>
              <div *ngIf="socioForm.controls['apellido'].errors && 
                         (socioForm.controls['apellido'].dirty || socioForm.controls['apellido'].touched)" 
                   class="alert alert-danger mt-2 p-2">
                <div *ngIf="socioForm.controls['apellido'].errors['required']">
                  <small><i class="fas fa-exclamation-circle me-1"></i>El apellido es requerido.</small>
                </div>
                <div *ngIf="socioForm.controls['apellido'].errors['minlength']">
                  <small><i class="fas fa-exclamation-circle me-1"></i>El apellido debe tener al menos 3 caracteres.</small>
                </div>
              </div>
            </div>

            <!-- DNI con icono -->
            <div class="form-group mb-4">
              <label for="dni" class="font-weight-bold d-flex align-items-center">
                <i class="fas fa-id-badge me-2 text-success"></i> DNI
              </label>
              <div class="input-group">
                <span class="input-group-text text-success"><i class="fas fa-address-card"></i></span>
                <input type="text" class="form-control input-verde" id="dni" placeholder="Ingresa tu DNI"
                  formControlName="dni">
              </div>
              <div *ngIf="socioForm.controls['dni'].errors && 
                         (socioForm.controls['dni'].dirty || socioForm.controls['dni'].touched)" 
                   class="alert alert-danger mt-2 p-2">
                <div *ngIf="socioForm.controls['dni'].errors['required']">
                  <small><i class="fas fa-exclamation-circle me-1"></i>El DNI es requerido.</small>
                </div>
                <div *ngIf="socioForm.controls['dni'].errors['pattern']">
                  <small><i class="fas fa-exclamation-circle me-1"></i>Debe contener solo números.</small>
                </div>
                <div *ngIf="socioForm.controls['dni'].errors['minlength'] || socioForm.controls['dni'].errors['maxlength']">
                  <small><i class="fas fa-exclamation-circle me-1"></i>El DNI debe tener 8 dígitos.</small>
                </div>
              </div>
            </div>

            <!-- Email con icono -->
            <div class="form-group mb-4">
              <label for="correo" class="font-weight-bold d-flex align-items-center">
                <i class="fas fa-envelope me-2 text-success"></i> Email
              </label>
              <div class="input-group">
                <span class="input-group-text text-success"><i class="fas fa-at"></i></span>
                <input type="correo" class="form-control input-verde" id="correo" placeholder="Ingresa tu correo"
                  formControlName="correo">
              </div>
              <div *ngIf="socioForm.controls['correo'].errors && 
                         (socioForm.controls['correo'].dirty || socioForm.controls['correo'].touched)" 
                   class="alert alert-danger mt-2 p-2">
                <div *ngIf="socioForm.controls['correo'].errors['required']">
                  <small><i class="fas fa-exclamation-circle me-1"></i>El email es requerido.</small>
                </div>
                <div *ngIf="socioForm.controls['correo'].errors['email']">
                  <small><i class="fas fa-exclamation-circle me-1"></i>Formato de email inválido.</small>
                </div>
              </div>
            </div>
          </div>

          <!-- Columna derecha -->
          <div class="col-md-6">
            <!-- Username con icono -->
            <div class="form-group mb-4">
              <label for="username" class="font-weight-bold d-flex align-items-center">
                <i class="fas fa-user-circle me-2 text-success"></i> Username
              </label>
              <div class="input-group">
                <span class="input-group-text text-success"><i class="fas fa-user-tag"></i></span>
                <input type="text" class="form-control input-verde" id="username" placeholder="Ingresa tu username"
                  formControlName="username">
              </div>
              <div *ngIf="socioForm.controls['username'].errors && 
                         (socioForm.controls['username'].dirty || socioForm.controls['username'].touched)" 
                   class="alert alert-danger mt-2 p-2">
                <div *ngIf="socioForm.controls['username'].errors['required']">
                  <small><i class="fas fa-exclamation-circle me-1"></i>El username es requerido.</small>
                </div>
                <div *ngIf="socioForm.controls['username'].errors['minlength']">
                  <small><i class="fas fa-exclamation-circle me-1"></i>El username debe tener al menos 4 caracteres.</small>
                </div>
              </div>
            </div>

            <!-- Password con icono -->
            <div class="form-group mb-4">
              <label for="password" class="font-weight-bold d-flex align-items-center">
                <i class="fas fa-lock me-2 text-success"></i> Password
              </label>
              <div class="input-group">
                <span class="input-group-text text-success"><i class="fas fa-key"></i></span>
                <input [type]="showPassword ? 'text' : 'password'" class="form-control input-verde" id="password" 
                       placeholder="Ingresa la contraseña" formControlName="password">
                <button class="btn btn-outline-success" type="button" (click)="togglePasswordVisibility()">
                  <i class="fas" [class.fa-eye]="!showPassword" [class.fa-eye-slash]="showPassword"></i>
                </button>
              </div>
              <div *ngIf="socioForm.controls['password'].errors && 
                         (socioForm.controls['password'].dirty || socioForm.controls['password'].touched)" 
                   class="alert alert-danger mt-2 p-2">
                <div *ngIf="socioForm.controls['password'].errors['required']">
                  <small><i class="fas fa-exclamation-circle me-1"></i>El password es requerido.</small>
                </div>
                <div *ngIf="socioForm.controls['password'].errors['minlength']">
                  <small><i class="fas fa-exclamation-circle me-1"></i>El password debe tener al menos 6 caracteres.</small>
                </div>
              </div>
            </div>

            <!-- Rol con icono -->
            <div class="form-group mb-4">
              <label for="idRol" class="font-weight-bold d-flex align-items-center">
                <i class="fas fa-user-tag me-2 text-success"></i> Rol
              </label>
              <div class="input-group">
                <span class="input-group-text text-success"><i class="fas fa-users-cog"></i></span>
                <select class="form-select input-verde" id="idRol" formControlName="rol">
                  <option *ngFor="let r of ArrayRoles" [ngValue]="r._id">{{r.tipo}}</option>
                </select>
              </div>
              <div *ngIf="socioForm.controls['rol'].errors && 
                         (socioForm.controls['rol'].dirty || socioForm.controls['rol'].touched)" 
                   class="alert alert-danger mt-2 p-2">
                <div *ngIf="socioForm.controls['rol'].errors['required']">
                  <small><i class="fas fa-exclamation-circle me-1"></i>El rol es requerido.</small>
                </div>
              </div>
            </div>


          </div>
        </div>

        <!-- Botones con iconos -->
        <div class="form-group text-center mt-4">
          <button *ngIf="accion === 'new'" type="button" class="btn btn-success btn-lg me-3"
            [disabled]="socioForm.invalid || loading" (click)="RegistrarUsuario()">
            <span *ngIf="!loading">
              <i class="fas fa-user-plus me-2"></i>Registrarse
            </span>
            <span *ngIf="loading">
              <span class="spinner-border spinner-border-sm me-2" role="status"></span>
              Enviando...
            </span>
          </button>
          <button *ngIf="accion === 'update'" type="button" class="btn btn-success btn-lg me-3"
            [disabled]="(!socioForm.valid && socioForm.dirty) || loading" (click)="ActualizarUsuario()">
            <span *ngIf="!loading">
              <i class="fas fa-sync-alt me-2"></i>Actualizar
            </span>
            <span *ngIf="loading">
              <span class="spinner-border spinner-border-sm me-2" role="status"></span>
              Enviando...
            </span>
          </button>
          <button type="button" class="btn btn-danger btn-lg" [routerLink]="['/admin/usuario-listado']">
            <i class="fas fa-times-circle me-2"></i>Cancelar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>