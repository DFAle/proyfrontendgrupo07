<div class="container d-flex align-items-center justify-content-center min-vh-100">
  <div class="card shadow-lg p-4 bg-light rounded" style="max-width: 400px; width: 100%;">
    <div class="text-center mb-4">
      <i class="fas fa-id-card fa-3x text-primary"></i>
      <h3 class="mt-3">Validar DNI</h3>
      <p>Ingrese el DNI del socio</p>
    </div>

    <form #dniForm="ngForm" (ngSubmit)="null" novalidate>

      <!-- DNI -->
      <div class="mb-3 input-group">
        <span class="input-group-text bg-primary text-white">
          <i class="fas fa-id-badge"></i>
        </span>
        <input type="text" name="dni" [(ngModel)]="dniIngresado" #dniInput="ngModel" required minlength="7"
          pattern="^[0-9]*$" class="form-control" placeholder="Ej: 30123456" />
      </div>

      <!-- Validaciones -->
      <div *ngIf="dniInput.touched && dniInput.invalid" class="text-danger mb-3">
        <small *ngIf="dniInput.errors?.['required']">El DNI es obligatorio.</small>
        <small *ngIf="dniInput.errors?.['minlength']">Debe tener al menos 7 dígitos.</small>
        <small *ngIf="dniInput.errors?.['pattern']">Solo números permitidos.</small>
      </div>


      <!-- Botones -->
      <div class="d-grid gap-2">
        <!-- Botón para Validar (abre modal de Validación) -->
        <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modalValidar"
          [disabled]="dniForm.invalid" (click)="TomarAsistencia()">
          <i class="fas fa-check-circle me-1"></i> Validar
        </button>

        <!-- Botón para Consultar (abre modal de Consulta) -->
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalConsultar"
          [disabled]="!dniInput.valid" (click)=" ConsultarUsuario()">
          <i class="fas fa-search me-1"></i> Consultar usuario
        </button>
      </div>
    </form>
  </div>
</div>



<div class="modal fade" id="modalSeleccionActividad" tabindex="-1" aria-labelledby="modalSeleccionActividadLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalSeleccionActividadLabel">Seleccionar Actividad</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="modal-body">
        <p>Este usuario está inscripto en varias actividades. Seleccione una para registrar la asistencia:</p>
        <ul class="list-group">
          <li *ngFor="let actividad of actividadesDisponiblesParaAsistencia" class="list-group-item d-flex justify-content-between align-items-center">
            {{ actividad.nombre }} ({{ actividad.fecha }})
            <button class="btn btn-sm btn-success" (click)="registrarAsistencia(actividad._id, usuarioSeleccionadoParaAsistencia)">
              Tomar Asistencia
            </button>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>




<div class="modal fade" id="modalConsultar" tabindex="-1" aria-labelledby="modalConsultarLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="modalConsultarLabel">Información del Usuario</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
      </div>
      <div class="alert alert-info text-center" *ngIf="mensajeConsultar">
          <div *ngFor="let a of ArrayDatoUsuario">
            <p>{{a.nombre}}</p>
            <p>{{a.apellido}}</p>
            <p>{{a.dni}}</p>
          </div>  
        {{ mensajeConsultar }}
          <div *ngFor="let a of ArrayMiActivdades">
            <p>
              Fecha de Inscripción: {{a.fecha}} - Estado:  {{a.tipo}}
            </p>
          </div>
        </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>